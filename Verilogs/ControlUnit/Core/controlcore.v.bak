module controlcore(
  clock, reset, ID, take, enable,
  NEG, ZER, CAR, OVERF, MODE,//SpecReg
  NegALU, ZALU, CALU, VALU,
  NBS, ZBS, CBS, VBS,
  controlALU, controlBS, controlEM, controlRB,
  controlSE1,//down one
  controlSE2,//upper one
  controlMAH, controlMDH, controlMUX
  );

  input NegALU, ZALU, CALU, VALU, NBS, ZBS, CBS, VBS;
  output reg NEG, ZER, CAR, OVERF, MODE, enable;



  always @ ( posedge clock ) begin  //Flag Setting
    if (reset) begin
      {NEG, ZER, CAR, OVERF, MODE}<=5'b00000;
    end else begin
      case (ID)
        1: begin  //LSL
          NEG<=NBS;
          ZER<=ZBS;
          CAR<=CBS;
        end
        2: begin  //LSR
          NEG<=NBS;
          ZER<=ZBS;
          CAR<=CBS;
        end
        3: begin  //ASR
          NEG<=NBS;
          ZER<=ZBS;
          CAR<=CBS;
        end
        4: begin  //ADD
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        5: begin  //SUB
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        6: begin  //ADD
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end //SUB
        7: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        8: begin  //MOV
          NEG<=NALU;
          ZER<=ZALU;
        end
        9: begin  //CMP
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        10: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        11: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        12: begin
          NEG<=NALU;
          ZER<=ZALU;
        end
        13: begin
          NEG<=NALU;
          ZER<=ZALU;
        end
        14: begin
          NEG<=NBS;
          ZER<=ZBS;
          CAR<=CBS;
        end
        15: begin
          NEG<=NBS;
          ZER<=ZBS;
          CAR<=CBS;
        end
        16: begin
          NEG<=NBS;
          ZER<=ZBS;
          CAR<=CBS;
        end
        17: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        18: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        19: begin
          NEG<=NBS;
          ZER<=ZBS;
          CAR<=CBS;
        end
        20: begin
          NEG<=NALU;
          ZER<=ZALU;
        end
        21: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        22: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        23: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        24: begin
          NEG<=NALU;
          ZER<=ZALU;
        end
        25: begin
          NEG<=NALU;
          ZER<=ZALU;
        end
        26: begin
          NEG<=NALU;
          ZER<=ZALU;
        end
        27: begin
          NEG<=NALU;
          ZER<=ZALU;
        end
        31: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        32: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        33: begin
          NEG<=NALU;
          ZER<=ZALU;
          CAR<=CALU;
          OVERF<=VALU;
        end
        34: begin
          OVERF<=VALU;
        end
        65: begin
          OVERF<=VALU;
        end
        69: begin
          MODE <= !MODE;
        end
      endcase
    end
  end

  always @ ( * ) begin
    if (reset) begin
      controlALU = 0;
      controlBS = 0;
      controlRB = 5;
      controlSE1 = 0;//down
      controlSE2 = 0;//up
      controlMAH = 0;
      controlMDH = 0;
      controlEM = 7;
      controlMUX = 0;
      enable = 1;
    end else begin
      controlALU = 12;
      controlBS = 0;
      controlRB = 1;
      controlSE1 = 0;
      controlSE2 = 0;
      controlMAH = 0;
      controlMDH = 0;
      controlEM = 0;
      controlMUX = 0;
      enable = 1;
      case (ID)
        1:begin
          controlBS=3;
          controlMUX=1;
        end
        2:begin
          controlBS = 4;
          controlMUX = 1;
        end
        3:begin
          controlBS = 2;
          //controlRB = 1;
          controlMUX = 1;
        end
        4:begin
          controlALU = 2;
          //controlRB = 1;
        end
        5:begin
          controlALU 5;
        end
        6:begin
          controlALU = 2;
          //controlRB = 1;
          controlMUX = 1;
        end
        7:begin
          controlALU = 5;
          controlMUX = 1;
        end
        8:begin
          controlMUX = 1;
        end
        9:begin
          controlALU = 5;
          //controlRB = 1;
          controlMUX = 1;
        end
        10:begin
          controlALU = 2;
          controlMUX = 1;
        end
        11:begin
          controlALU = 5;
          controlMUX = 1;
        end
        12:begin
          controlALU = 3;
          //controlRB = 1;
        end
        13:begin
          controlALU = 13;
        end
        14:begin
          controlBS = 3;
        end
        15:begin
          controlBS = 4;
        end
        16:begin
          controlBS = 2;
          //controlRB = 1;
        end
        17:begin
          controlALU = 1;
          //controlRB = 1;
        end
        18:begin
          controlALU = 8;
        end
        19:begin
          controlBS = 5;
        end
        20:begin
          controlALU = 14;
        end
        21:begin
          controlALU = 6;
        end
        22:begin
          controlALU = 5;
          //controlRB = 1;
        end
        23:begin
          controlALU = 2;
        end
        24:begin
          controlALU = 7;
        end
        25:begin
          controlALU = 9;
        end
        26:begin
          controlALU = 4;
          //controlRB = 1;
        end
        27:begin
        end
        28:begin
          controlALU = 2;
          //controlRB = 1;
        end
        29:begin
          controlALU = 2;
          //controlRB = 1;
        end
        30:begin
          controlALU = 2;
          //controlRB = 1;
        end
        31:begin
          controlALU = 5;
          //controlRB = 1;
        end
        32:begin
          controlALU = 5;
          //controlRB = 1;
        end
        33:begin
          controlALU = 5;
          //controlRB = 1;
        end
        34:begin
          controlALU = 10;
        end
        35:begin
          //standard
        end
        36:begin
          //standard
        end
        37:begin
          //standard
        end
        38:begin
          controlALU = 0;
          controlMAH = take? 6 : 0;
          controlRB =0;
        end
        39:begin
          controlALU = 2;
          controlBS = 1;
          controlMUX = 1;
          controlRB = 3;
          controlMAH = 5;
          controlMDH = 6;
          controlEM = 6;
        end
        40:begin
          controlALU = 2;
          controlMAH = 5;
          controlMDH = 3;
          controlEM = 3;
          controlRB = 0;
        end
        41:begin
          controlALU = 2;
          controlMAH = 4;
          controlMDH = 2;
          controlEM = 2;
          controlRB = 0;
        end
        42:begin
          controlALU = 2;
          controlMAH = 3;
          controlMDH = 1;
          controlEM = 1;
          controlRB = 0;
        end
        43:begin
          controlALU = 2;
          controlMAH = 3;
          controlEM = 4;
          controlMDH = 4;
          controlSE2 = 2;
          controlRB = 3;
        end
        44:begin
          controlALU = 2;
          controlMAH = 5;
          controlEM = 4;
          controlMDH = 6;
          controlRB = 3;
        end
        45:begin
          controlALU = 2;
          controlMAH = 4;
          controlEM = 5;
          controlMDH = 5;
          controlSE2 = 3;
          controlRB = 3;
        end
        46:begin
          controlALU = 2;
          controlMAH = 3;
          controlMDH = 4;
          controlSE2 = 4;
          controlRB = 3;
        end
        47:begin
          controlALU = 2;
          controlMAH = 4;
          controlMDH = 5;
          controlSE2 = 1;
          controlRB = 3;
        end
        48:begin
          controlMUX = 1;
          controlALU = 2;
          controlMAH = 5;
          controlEM = 3;
          controlMDH =3;
          controlRB = 0;
        end
        49:begin
          controlMUX = 1;
          controlALU = 2;
          controlMAH = 5;
          controlEM = 6;
          controlMDH = 6;
          controlRB = 3;
        end
        50:begin
          controlMUX = 1;
          controlALU = 2;
          controlMAH = 3;
          controlEM = 1;
          controlMDH = 1;
          controlRB  = 0;
        end
        51:begin
          controlMUX = 1;
          controlALU = 2;
          controlMAH = 3;
          controlEM = 4;
          controlMDH = 4;
          controlSE2 = 4;
          controlRB = 3;
        end
        52:begin
          controlMUX = 1;
          controlALU = 2;
          controlMAH = 4;
          controlEM = 2;
          controlMDH = 2;
          controlRB = 0;
        end
        53:begin
          controlMUX = 1;
          controlALU = 2;
          controlMAH = 4;
          controlEM = 5;
          controlMDH = 5;
          controlRB =3;
          controlSE2 = 3;
        end
        54:begin
          controlMUX = 1;
          controlSE1 = 2;
          controlALU = 2;
          controlMAH = 5;
          controlEM = 3;
          controlMDH = 3;
          controlRB = 0;
        end
        55:begin
          controlMUX =1;
          controlSE1 = 2;
          controlALU = 2;
          controlMAH = 5;
          controlEM = 6;
          controlMDH = 6;
          controlRB = 3;
        end
        56:begin
          controlALU = 2;
          controlBS = 1;
          //controlRB = 1;
          controlMUX = 1;
        end
        57:begin
          controlALU = 2;
          controlBS = 1;
          //controlRB = 1;
          controlMUX = 1;
        end
        58:begin
          controlRB = 2;
        end
        59:begin
          controlSE1 = 1;
        end
        60:begin
          controlSE1 = 2;
        end
        61:begin
          controlSE1 = 3;
        end
        62:begin
          controlSE1 = 4;
        end
        63:begin
          controlBS = 6;
        end
        64:begin
          controlBS = 7;
        end
        65:begin
          controlALU = 11;
        end
        66:begin
          controlBS = 8;
        end
        67:begin
          controlMAH = 1;
          controlEM = 3;
          controlMDH = 3;
          controlRB = 0;
        end
        68:begin
          controlMAH = 2;
          controlEM = 6;
          controlMDH = 6;
          controlRB = 3;
        end
        69:begin
        if (M) begin
          controlMAH = 6;
          controlRB = 0;
        end else begin
          controlMUX = 1;
          controlMAH = 6;
          controlRB = 4;
        end
        end
        70:begin
          controlMUX = 1;
          controlBS = 1;
          controlSE1 = 2;
          controlALU = 2;
          controlMAH = take? 6:0;
          controlRB = 0;
        end
        71:begin
          controlRB = 0;
        end
        72:begin
          controlRB = 0;
          enable = 0;
        end
        default: controlRB = 0;
      endcase
    end

  end

endmodule
